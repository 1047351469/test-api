type IsObject<T> = T extends object
  ? T extends Function
    ? false
    : true
  : false;

type ExtractFlatStringLayer<
  T,
  TargetDepth extends number,
  CurrentDepth extends any[] = [],
  Result = {}
> = CurrentDepth['length'] extends TargetDepth
  ? T extends object
    ? {
        [K in keyof T]: string;
      }
    : {}
  : T extends object
    ? {
        [K in keyof T]: ExtractFlatStringLayer<
          T[K],
          TargetDepth,
          [...CurrentDepth, 1]
        >;
      }[keyof T] extends infer O
      ? O extends object
        ? { [K in keyof O]: O[K] }
        : {}
      : {}
  : {};